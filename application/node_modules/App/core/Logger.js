var c = require('jn-classjs'),
	Log = require('log'),
	log, debug, logMethod;

var cls = c.create({
	constructor: function() {
		if (!log) {
			var that = this;
			debug = !process.env.production;
			log = new Log(debug ? 'debug' : 'error');

			this.log = log.debug.bind(log);
			['alert', 'critical', 'error', 'warning', 'notice', 'info', 'debug'].forEach(function(fn) {
				that[fn] = log[fn].bind(log);
			});
		}
	}
});

module.exports = new cls();