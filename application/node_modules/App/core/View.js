var c = require('jn-classjs'),
	lo = require('lodash'),
	fs = require('fs');

module.exports = c.define('App.core.View', {
	tpl: null,
	constructor: function(viewPath, options) {
		this.options = options || null;
		this.loadFile(viewPath, options);
	},

	loadFile: function(path) {
		if (path) {
			var file = fs.readFileSync(path);
			if (file) {
				this.tpl = lo.template(file.toString(), options);
			}
		}
	},

	getCode: function(params) {
		return this.tpl ? this.tpl(params) : '';
	}
});
